# ğŸ“‹ Ringkasan Perubahan Dokumentasi v1.1 (Opsi A - Extended Scope)

**Tanggal Update**: 15 Januari 2026  
**Stakeholder Decision**: Opsi A (Expand v1.1 scope dengan full hierarchical management)  
**Timeline Extension**: +3 minggu (dari 14 minggu menjadi 17 minggu)

---

## ğŸ¯ Perubahan Scope

### **Fitur Yang Diperluas: Borang Indikator Management**

**Dari** (Original Scope):
- Manajemen Indikator Penilaian saja (CRUD sederhana untuk evaluation_indicators)

**Menjadi** (Expanded Scope):
1. **Manajemen Template Borang Akreditasi** - Support multiple standards (BAN-PT, Internal PTM, dll)
2. **Manajemen Unsur Evaluasi** - Level 1 categories dengan bobot dan ordering
3. **Manajemen Sub Unsur** - Level 2 subcategories dengan ability to move between Unsur
4. **Manajemen Indikator Penilaian** - Level 3 assessment items dengan relational hierarchy

**Arsitektur Hierarki**:
```
Template Borang Akreditasi (e.g., "BAN-PT 2024")
â”‚
â”œâ”€â”€ Unsur Evaluasi 1 (e.g., "Visi Misi", weight: 20%)
â”‚   â”œâ”€â”€ Sub Unsur 1.1 (e.g., "Kejelasan Visi")
â”‚   â”‚   â”œâ”€â”€ Indikator 1.1.1 (pertanyaan spesifik)
â”‚   â”‚   â”œâ”€â”€ Indikator 1.1.2
â”‚   â”‚   â””â”€â”€ Indikator 1.1.3
â”‚   â””â”€â”€ Sub Unsur 1.2 (e.g., "Implementasi Visi")
â”‚       â”œâ”€â”€ Indikator 1.2.1
â”‚       â””â”€â”€ Indikator 1.2.2
â”‚
â”œâ”€â”€ Unsur Evaluasi 2 (e.g., "Tata Kelola", weight: 30%)
    â””â”€â”€ [nested structure...]
```

---

## ğŸ“ File Yang Diperbarui

### 1. **jurnal_mu MVP v1.1 - UPDATED.md** âœ…

**Perubahan Utama**:
- âœ… Judul diperbarui: "Full Hierarchical Management" emphasis
- âœ… Development Duration: 14 minggu â†’ **17 minggu**
- âœ… Feature 2 diperluas dari "Dynamic Borang Indikator Management" menjadi "Full Hierarchical Borang Indikator Management" dengan 4 sub-features:
  - 2A: Manajemen Template Borang Akreditasi
  - 2B: Manajemen Unsur Evaluasi
  - 2C: Manajemen Sub Unsur
  - 2D: Manajemen Indikator Penilaian
  - 2E: Tree View & Audit Trail
- âœ… Database schema: Added 3 new tables (accreditation_templates, evaluation_categories, evaluation_sub_categories)
- âœ… Modified evaluation_indicators table: Added sub_category_id, code, display_order, is_required, is_active columns
- âœ… Added drag-and-drop reordering requirements untuk semua 3 levels
- âœ… Added clone template feature requirements
- âœ… Added audit trail requirements untuk compliance

**Struktur Baru**:
- **Section 2A**: Template Borang Akreditasi (4 user stories, database schema, API endpoints)
- **Section 2B**: Unsur Evaluasi (2 user stories, drag-and-drop reordering, deletion constraints)
- **Section 2C**: Sub Unsur (2 user stories, moving between parents, nested display)
- **Section 2D**: Indikator Penilaian (3 user stories, soft delete, bulk actions)
- **Section 2E**: Tree View & Audit Trail (hierarchical display, polymorphic logging)

**Acceptance Criteria Tambahan**:
- CRUD interfaces untuk 4 levels hierarki
- Drag-and-drop reordering untuk Categories, Sub Categories, Indicators
- Clone template feature dengan deep copy
- Tree view dengan expandable nodes
- Audit trail dengan JSON diff
- Validation rules untuk setiap level (unique codes, weight constraints, deletion constraints)

---

### 2. **jurnal_mu roadmap v1.1 - UPDATED.md** âœ…

**Perubahan Utama**:
- âœ… Timeline: 14 minggu â†’ **17 minggu** (85 hari kerja)
- âœ… Target Release Date: 23 April 2026 â†’ **14 Mei 2026**
- âœ… Sprint 1 diperpanjang: 4 minggu â†’ **7 minggu** (41% dari total timeline)
- âœ… Sprint 1 dibagi menjadi 2 fase:
  - **Phase 1A** (Weeks 1-2): Assessment Review Implementation
  - **Phase 1B** (Weeks 3-7): Full Hierarchical Borang Management
- âœ… Timeline adjustment untuk Sprint 2-4 (start dates shifted by +3 weeks)

**Sprint 1 Breakdown Detail** (7 Minggu):

**Phase 1A: Assessment Review** (Days 1-10)
- Week 1 (Days 1-5): Backend implementation
- Week 2 (Days 6-10): Frontend + testing

**Phase 1B: Hierarchical Borang** (Days 11-35)
- Week 3 (Days 11-15): Database & Models Setup
  - Create 3 new tables migrations
  - Alter evaluation_indicators table
  - Create Eloquent models with relationships
  - Create policies (Super Admin only)
  - Seed default data & migration script
  
- Week 4 (Days 16-20): Template Borang Management - Backend
  - Create AccreditationTemplateController
  - Implement CRUD operations
  - Implement clone feature (deep copy)
  - Implement toggle active feature
  - Write feature tests
  
- Week 5 (Days 21-25): Unsur & Sub Unsur Management - Backend
  - Create EvaluationCategoryController
  - Implement drag-and-drop reordering API
  - Create EvaluationSubCategoryController
  - Implement move to different parent feature
  - Write feature tests
  
- Week 6 (Days 26-30): Indikator Management - Backend & Prep
  - Update IndicatorController with hierarchical context
  - Implement indicator reordering
  - Add audit trail system (polymorphic logging)
  - Create tree view API endpoint
  - Write integration tests
  
- Week 7 (Days 31-35): Hierarchical Management - Frontend
  - Create template management pages (Index, FormModal)
  - Create tree view component (expandable/collapsible)
  - Implement drag-and-drop reordering (dnd-kit library)
  - Create CRUD modals untuk each level
  - Polish & browser testing

**Sprint 2-4 Timeline Shifts**:
- Sprint 2: Week 5-9 â†’ **Week 8-12** (Pembinaan Module)
- Sprint 3: Week 10-12 â†’ **Week 13-15** (Reviewer Management)
- Sprint 4: Week 13-14 â†’ **Week 16-17** (Data Master + Polish)

**Milestones Update**:
| Milestone | Original Date | New Date |
|-----------|---------------|----------|
| Sprint 1 Complete | 9 Feb 2026 | **5 Mar 2026** |
| Sprint 2 Complete | 16 Mar 2026 | **9 Apr 2026** |
| Sprint 3 Complete | 6 Apr 2026 | **30 Apr 2026** |
| Sprint 4 Complete | 20 Apr 2026 | **14 Mei 2026** |
| Production Launch | 23 Apr 2026 | **14 Mei 2026** |

---

### 3. **ERD Database.md** (Perlu Manual Update)

**Perubahan Yang Diperlukan**:

#### A. Add Version History Section (at top):
```markdown
**Version History:**
- **v1.0 (Q1 2026):** Base MVP schema - 9 tables (users, roles, universities, journals, assessments, etc.)
- **v1.1 (Q2 2026):** +6 tables/alterations for hierarchical borang + coaching module
```

#### B. Add New Tables Section (before coaching_requests):

**10. accreditation_templates**
```sql
CREATE TABLE accreditation_templates (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL UNIQUE,
    description TEXT NULL,
    version VARCHAR(50) NULL,
    is_active BOOLEAN DEFAULT TRUE,
    effective_date DATE NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    INDEX idx_active (is_active),
    INDEX idx_effective_date (effective_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

**Purpose**: Store template definitions for different accreditation standards (BAN-PT, internal PTM, etc.)

**Relationships**:
- `hasMany`: evaluation_categories

---

**11. evaluation_categories**
```sql
CREATE TABLE evaluation_categories (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    template_id BIGINT UNSIGNED NOT NULL,
    code VARCHAR(50) NOT NULL,
    name VARCHAR(255) NOT NULL,
    description TEXT NULL,
    weight DECIMAL(5,2) DEFAULT 0.00,
    display_order INT UNSIGNED DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    FOREIGN KEY (template_id) REFERENCES accreditation_templates(id) ON DELETE CASCADE,
    INDEX idx_template_order (template_id, display_order),
    INDEX idx_active (is_active),
    UNIQUE KEY unique_template_code (template_id, code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

**Purpose**: Store Unsur Evaluasi (Level 1 categories) under each template

**Relationships**:
- `belongsTo`: accreditation_templates
- `hasMany`: evaluation_sub_categories

**Cascade Rules**:
- ON DELETE CASCADE (if template deleted, delete all categories)

---

**12. evaluation_sub_categories**
```sql
CREATE TABLE evaluation_sub_categories (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    category_id BIGINT UNSIGNED NOT NULL,
    code VARCHAR(50) NOT NULL,
    name VARCHAR(255) NOT NULL,
    description TEXT NULL,
    display_order INT UNSIGNED DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    FOREIGN KEY (category_id) REFERENCES evaluation_categories(id) ON DELETE CASCADE,
    INDEX idx_category_order (category_id, display_order),
    INDEX idx_active (is_active),
    UNIQUE KEY unique_category_code (category_id, code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

**Purpose**: Store Sub Unsur (Level 2 subcategories) under each Unsur

**Relationships**:
- `belongsTo`: evaluation_categories
- `hasMany`: evaluation_indicators

**Cascade Rules**:
- ON DELETE CASCADE (if category deleted, delete all sub_categories)

---

#### C. Update evaluation_indicators Table Documentation:

**Original**:
```markdown
### 5. evaluation_indicators
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | BIGINT UNSIGNED | PK | Primary key |
| category | VARCHAR(255) | NOT NULL | Kategori indikator |
| sub_category | VARCHAR(255) | NOT NULL | Sub-kategori |
| question | TEXT | NOT NULL | Pertanyaan evaluasi |
| response_type | ENUM | 'text', 'number', 'file' | Tipe jawaban |
| created_at | TIMESTAMP | NULL | Waktu pembuatan |
| updated_at | TIMESTAMP | NULL | Waktu update |
```

**Updated To**:
```markdown
### 5. evaluation_indicators (v1.1 UPDATED)

**v1.1 Changes**: Added hierarchical relationship, activation status, and ordering

| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | BIGINT UNSIGNED | PK | Primary key |
| sub_category_id | BIGINT UNSIGNED | NULL, FK | **[v1.1]** Foreign key to evaluation_sub_categories |
| code | VARCHAR(50) | NULL | **[v1.1]** Unique code (e.g., "1.1.1", "A.2.3") |
| category | VARCHAR(255) | NULL | **[v1.0 - DEPRECATED]** Old string-based category |
| sub_category | VARCHAR(255) | NULL | **[v1.0 - DEPRECATED]** Old string-based sub_category |
| question | TEXT | NOT NULL | Pertanyaan evaluasi |
| display_order | INT UNSIGNED | DEFAULT 0 | **[v1.1]** Order within sub_category |
| response_type | ENUM | 'text', 'number', 'file' | Tipe jawaban |
| is_required | BOOLEAN | DEFAULT TRUE | **[v1.1]** Whether indicator must be answered |
| is_active | BOOLEAN | DEFAULT TRUE | **[v1.1]** Activation status |
| created_at | TIMESTAMP | NULL | Waktu pembuatan |
| updated_at | TIMESTAMP | NULL | Waktu update |
| deleted_at | TIMESTAMP | NULL | **[v1.1]** Soft delete timestamp |

**Indexes**:
- `idx_subcategory_order`: (sub_category_id, display_order)
- `idx_active`: (is_active)

**Foreign Keys**:
- `sub_category_id` REFERENCES evaluation_sub_categories(id) ON DELETE SET NULL

**Backward Compatibility**:
- Old `category` and `sub_category` columns retained for existing data
- New indicators will use `sub_category_id` relationship
- Migration strategy allows gradual transition
```

---

#### D. Add Relationships Summary Section (at end):

```markdown
## Relationships Summary (Updated for v1.1)

### Core v1.0 Relationships:
```
roles (1) â”€â”€â”€â”€â”€â”€ (N) users
universities (1) â”€â”€â”€â”€â”€â”€ (N) users
universities (1) â”€â”€â”€â”€â”€â”€ (N) journals
scientific_fields (1) â”€â”€â”€â”€â”€â”€ (N) journals
users (1) â”€â”€â”€â”€â”€â”€ (N) journals
journals (1) â”€â”€â”€â”€â”€â”€ (N) journal_assessments
users (1) â”€â”€â”€â”€â”€â”€ (N) journal_assessments (reviewer)
journal_assessments (1) â”€â”€â”€â”€â”€â”€ (N) assessment_responses
journal_assessments (1) â”€â”€â”€â”€â”€â”€ (N) assessment_attachments
```

### v1.1 Hierarchical Borang Relationships:
```
accreditation_templates (1) â”€â”€â”€â”€â”€â”€ (N) evaluation_categories
evaluation_categories (1) â”€â”€â”€â”€â”€â”€ (N) evaluation_sub_categories
evaluation_sub_categories (1) â”€â”€â”€â”€â”€â”€ (N) evaluation_indicators

[Hierarchy Flow: Template â†’ Unsur (Category) â†’ Sub Unsur â†’ Indikator]
```

### v1.1 Coaching Module Relationships:
```
journals (1) â”€â”€â”€â”€â”€â”€ (N) coaching_requests
users (1) â”€â”€â”€â”€â”€â”€ (N) coaching_requests (requester)
coaching_requests (1) â”€â”€â”€â”€â”€â”€ (N) coaching_assignments
users (1) â”€â”€â”€â”€â”€â”€ (N) coaching_assignments (reviewer)
coaching_assignments (1) â”€â”€â”€â”€â”€â”€ (N) coaching_feedback
```
```

---

## ğŸ“Š Impact Analysis

### **Database Impact**:
- âœ… **3 new tables added**: accreditation_templates, evaluation_categories, evaluation_sub_categories
- âœ… **1 table modified**: evaluation_indicators (6 new columns)
- âœ… **Backward compatibility preserved**: Old category/sub_category columns retained
- âœ… **Migration strategy**: Gradual transition, no breaking changes for v1.0 data

### **Development Impact**:
- âœ… **Timeline extension**: +3 weeks (21 hari kerja tambahan)
- âœ… **Sprint 1 workload increase**: 4 weeks â†’ 7 weeks (75% increase)
- âœ… **New dependencies**:
  - Frontend: Install dnd-kit library for drag-and-drop
  - Frontend: Create TreeView component
  - Backend: Implement polymorphic audit logging
  - Backend: Deep clone transaction logic

### **Feature Impact**:
- âœ… **Value add**: Super Admin can now manage full accreditation hierarchy without developer intervention
- âœ… **Flexibility**: Support multiple accreditation standards (BAN-PT, internal PTM, future standards)
- âœ… **Compliance**: Audit trail provides full traceability for regulatory requirements
- âœ… **UX improvement**: Drag-and-drop reordering significantly better than manual order input

### **Risk Assessment**:
| Risk | Level | Mitigation |
|------|-------|------------|
| Complexity increase | Medium | Break into smaller tasks (1 week per level), write tests first |
| Drag-and-drop library integration | Low | Use battle-tested library (dnd-kit), follow official examples |
| Performance (tree view) | Medium | Use eager loading, index foreign keys, test with 100+ indicators |
| Timeline overrun | Medium | Strict scope discipline, ready to cut polish items if needed |

---

## âœ… Next Steps

### **Immediate Actions** (Post-Dokumentasi):

1. **Review dengan Stakeholder** (1-2 days)
   - Present updated MVP doc, roadmap, ERD changes
   - Confirm acceptance of 17-week timeline
   - Get sign-off on expanded scope

2. **Environment Setup** (Day 1-2)
   - Update local development environment
   - Install dnd-kit: `npm install @dnd-kit/core @dnd-kit/sortable`
   - Verify Laravel/React versions compatible

3. **Sprint 1 Kickoff** (Day 3)
   - Create Sprint 1 tasks in project management tool
   - Set up daily progress tracking
   - Begin Week 1 Day 1 tasks (Assessment Review Backend)

### **Weekly Checkpoints**:
- Every Friday: Review progress vs roadmap
- Update this summary document with:
  - Tasks completed âœ…
  - Blockers encountered ğŸš«
  - Timeline adjustments if needed

### **Documentation Maintenance**:
- Update original files when ready to replace:
  - `jurnal_mu MVP v1.1.md` â†’ Replace with UPDATED version
  - `jurnal_mu roadmap v1.1.md` â†’ Replace with UPDATED version
  - `ERD Database.md` â†’ Apply manual updates from this summary
- Keep this summary as changelog reference

---

## ğŸ“ Approval & Sign-Off

**Prepared By**: AI Development Assistant  
**Date**: 15 Januari 2026  
**Status**: Awaiting stakeholder approval

**Approval Required From**:
- [ ] Project Stakeholder (confirm expanded scope & timeline)
- [ ] Development Lead (confirm technical feasibility)
- [ ] Product Owner (confirm prioritization)

**Once Approved**:
- [ ] Replace original documentation files
- [ ] Update project management tool with new tasks
- [ ] Communicate timeline change to all stakeholders
- [ ] Begin Sprint 1 development

---

## ğŸ“ Contact & Questions

Jika ada pertanyaan atau perlu klarifikasi lebih lanjut mengenai perubahan scope ini:

**Development Lead**: [Your Name]  
**Email**: [Your Email]  
**Project**: JurnalMu v1.1  
**Documentation**: `/docs` folder in repository

---

**Last Updated**: 15 Januari 2026, 14:30 WIB  
**Document Status**: DRAFT - Awaiting Approval  
**Next Review**: Post-stakeholder approval
